<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="/lib/pace/pace-theme-corner-indicator.min.css?v=1.0.2">
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="作业CAN201 网络  icequiz x2 + 两部分CW = 15分x2 + 70分w6和w14 quiz ; 程序项目，用python3">
<meta property="og:type" content="article">
<meta property="og:title" content="CAN201 网络">
<meta property="og:url" content="https://lucifinil-x.github.io/2020/09/07/CAN201-网络/index.html">
<meta property="og:site_name" content="Sanctuary">
<meta property="og:description" content="作业CAN201 网络  icequiz x2 + 两部分CW = 15分x2 + 70分w6和w14 quiz ; 程序项目，用python3">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-01-14T07:28:55.505Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CAN201 网络">
<meta name="twitter:description" content="作业CAN201 网络  icequiz x2 + 两部分CW = 15分x2 + 70分w6和w14 quiz ; 程序项目，用python3">
  <link rel="canonical" href="https://lucifinil-x.github.io/2020/09/07/CAN201-网络/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>CAN201 网络 | Sanctuary</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sanctuary</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://lucifinil-x.github.io/2020/09/07/CAN201-网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucifinil">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/touxiang1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sanctuary">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">CAN201 网络

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-09-07 11:10:14" itemprop="dateCreated datePublished" datetime="2020-09-07T11:10:14+08:00">2020-09-07</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-14 15:28:55" itemprop="dateModified" datetime="2021-01-14T15:28:55+08:00">2021-01-14</time>
              </span>
            
          

          
            <span class="post-meta-item" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/07/CAN201-网络/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/09/07/CAN201-网络/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p>CAN201 网络  icequiz x2 + 两部分CW = 15分x2 + 70分<br>w6和w14 quiz ; 程序项目，用python3</p><a id="more"></a>
<h2 id="黑马补课"><a href="#黑马补课" class="headerlink" title="黑马补课"></a>黑马补课</h2><h2 id="socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。"><a href="#socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。" class="headerlink" title="socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。"></a>socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。</h2><p>tcp:<br>服务器创建的socket是用来绑定自己本机的ip,port,并且设置监听。<br>服务器创建的socket接收客户端发过来的socket,接收到新的new socket里，<br>接收客户端发过来的数据是用new socket接收，发送给客户端数据是用new socket发送</p>
<h2 id="csdn"><a href="#csdn" class="headerlink" title="csdn"></a>csdn</h2><p>一个服务器多个客户端+时间戳</p>
<h2 id="https-www-jb51-net-article-138172-htm"><a href="#https-www-jb51-net-article-138172-htm" class="headerlink" title="https://www.jb51.net/article/138172.htm"></a><a href="https://www.jb51.net/article/138172.htm" target="_blank" rel="noopener">https://www.jb51.net/article/138172.htm</a></h2><p>明天看Python socket模拟客户端一直接收服务端数据，同时不影响客户端发送数据</p>
<h2 id="https-blog-csdn-net-JIA227-article-details-72962786-utm-medium-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control-amp-depth-1-utm-source-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control"><a href="#https-blog-csdn-net-JIA227-article-details-72962786-utm-medium-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control-amp-depth-1-utm-source-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control" class="headerlink" title="https://blog.csdn.net/JIA227/article/details/72962786?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control"></a><a href="https://blog.csdn.net/JIA227/article/details/72962786?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control" target="_blank" rel="noopener">https://blog.csdn.net/JIA227/article/details/72962786?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control</a></h2><p>还有老师的视频！ 今晚做完205！</p>
<h2 id="代码问题"><a href="#代码问题" class="headerlink" title="代码问题"></a>代码问题</h2><p>A复制给B要改端口号，不然A收不到数据</p>
<p>B改 下面的def；path = ‘VMB_share’</p>
<p>C改except OSError:myRecvPort = ports[2] 和 下面的def;</p>
<h2 id="path-‘VMC-share’"><a href="#path-‘VMC-share’" class="headerlink" title=" path = ‘VMC_share’"></a> path = ‘VMC_share’</h2><h2 id="一定要复制A和B的py命令！看好了再回车"><a href="#一定要复制A和B的py命令！看好了再回车" class="headerlink" title="一定要复制A和B的py命令！看好了再回车"></a>一定要复制A和B的py命令！看好了再回车</h2><p>因为端口号问题：<br>测试服务器一对多客户端：A只收到B,B收到A和C，C都没收到</p>
<h2 id="然后一会要把处理客户端的线程，存值用f-来改key值"><a href="#然后一会要把处理客户端的线程，存值用f-来改key值" class="headerlink" title="然后一会要把处理客户端的线程，存值用f{}来改key值"></a>然后一会要把处理客户端的线程，存值用f{}来改key值</h2><p>ip问题：<br>实际上ABC本机作为服务器的时候用同一个port,<br>所以本机作为客户端连接服务器的时候都连这同一个port，<br>但是一个电脑测试，我用A 20001 ，B 20002， C 20003 而且ABC程序写死对方的端口，复制过去B改，C改。</p>
<p>大家给别人的ip都是0,1</p>
<h2 id="ports-20001-20002-20003"><a href="#ports-20001-20002-20003" class="headerlink" title="ports = [20001,20002,20003]"></a>ports = [20001,20002,20003]</h2><h3 id="测试时候改B-C"><a href="#测试时候改B-C" class="headerlink" title="测试时候改B,C"></a>测试时候改B,C</h3><p>对于B:给AC<br>搜索[1]改四处<br>改两处A</p>
<p>129 改成[0] [2]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if destAddr[0] == B_client_info[&apos;client_ip&apos;]:</span><br><span class="line">    which_client_info = B_client_info # 字典</span><br><span class="line">    which_client_info[&apos;server_port&apos;] = ports2[1] # 这里是B下载服务端口号</span><br><span class="line">    recv_news_list = B_news_list</span><br><span class="line">    which_download_ticket_list = B_download_ticket_list # 一个文件信息一个ticketdic, 所有ticket加入ticketlist</span><br><span class="line">elif destAddr[0] == C_client_info[&apos;client_ip&apos;]:</span><br><span class="line">    which_client_info = C_client_info</span><br><span class="line">    which_client_info[&apos;server_port&apos;] = ports2[2] # 这里是B下载服务端口号</span><br><span class="line">    recv_news_list = C_news_list</span><br><span class="line">    which_download_ticket_list = C_download_ticket_list</span><br></pre></td></tr></table></figure>

<p>184</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def sendData_thread_job(ipList):</span><br><span class="line">    sleep(5)</span><br><span class="line">    # ports = [20001,20002,20003]</span><br><span class="line">    client_send_to_B_thread = threading.Thread(target=client_send_to_server_job, args=(ipList[0],ports1[0]))</span><br><span class="line">    client_send_to_C_thread = threading.Thread(target=client_send_to_server_job, args=(ipList[1],ports1[2]))</span><br><span class="line">    client_send_to_B_thread.start()</span><br><span class="line">    client_send_to_C_thread.start()</span><br></pre></td></tr></table></figure>

<p>241</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def sendFile_thread_job(ipList):</span><br><span class="line">    sleep(5)</span><br><span class="line">    # ports2 = [20011,20012,20013]</span><br><span class="line">    client_sendFile_to_B_thread = threading.Thread(target=client_sendFile_to_server_job, args=(ipList[0], ports2[0]))</span><br><span class="line">    client_sendFile_to_C_thread = threading.Thread(target=client_sendFile_to_server_job, args=(ipList[1], ports2[2]))</span><br><span class="line">    client_sendFile_to_B_thread.start()</span><br><span class="line">    client_sendFile_to_C_thread.start()</span><br></pre></td></tr></table></figure>

<p>255</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">with open(join(&quot;D:\大三上学期\CAN201 网络\cw1ABC文件仓库\B仓库&quot;,send_file_pathname), &quot;wb&quot;) as f:</span><br></pre></td></tr></table></figure>

<hr>
<p>对于C:给AB<br>搜索[1]改四处开启线程<br>改两处A<br>改两处except</p>
<p>129 改成 [0] [1]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if destAddr[0] == B_client_info[&apos;client_ip&apos;]:</span><br><span class="line">    which_client_info = B_client_info # 字典</span><br><span class="line">    which_client_info[&apos;server_port&apos;] = ports2[1] # 这里是B下载服务端口号</span><br><span class="line">    recv_news_list = B_news_list</span><br><span class="line">    which_download_ticket_list = B_download_ticket_list # 一个文件信息一个ticketdic, 所有ticket加入ticketlist</span><br><span class="line">elif destAddr[0] == C_client_info[&apos;client_ip&apos;]:</span><br><span class="line">    which_client_info = C_client_info</span><br><span class="line">    which_client_info[&apos;server_port&apos;] = ports2[2] # 这里是B下载服务端口号</span><br><span class="line">    recv_news_list = C_news_list</span><br><span class="line">    which_download_ticket_list = C_download_ticket_list</span><br></pre></td></tr></table></figure>

<p>140</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">except OSError:myRecvPort = ports[2]</span><br></pre></td></tr></table></figure>

<p>288</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">except OSError:</span><br><span class="line">        myRecvPort = ports2[2]</span><br></pre></td></tr></table></figure>

<p>184</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def sendData_thread_job(ipList):</span><br><span class="line">    sleep(5)</span><br><span class="line">    # ports = [20001,20002,20003]</span><br><span class="line">    client_send_to_B_thread = threading.Thread(target=client_send_to_server_job, args=(ipList[0],ports1[0]))</span><br><span class="line">    client_send_to_C_thread = threading.Thread(target=client_send_to_server_job, args=(ipList[1],ports1[1]))</span><br><span class="line">    client_send_to_B_thread.start()</span><br><span class="line">    client_send_to_C_thread.start()</span><br></pre></td></tr></table></figure>

<p>241</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def sendFile_thread_job(ipList):</span><br><span class="line">    sleep(5)</span><br><span class="line">    # ports2 = [20011,20012,20013]</span><br><span class="line">    client_sendFile_to_B_thread = threading.Thread(target=client_sendFile_to_server_job, args=(ipList[0], ports2[0]))</span><br><span class="line">    client_sendFile_to_C_thread = threading.Thread(target=client_sendFile_to_server_job, args=(ipList[1], ports2[1]))</span><br><span class="line">    client_sendFile_to_B_thread.start()</span><br><span class="line">    client_sendFile_to_C_thread.start()</span><br></pre></td></tr></table></figure>

<p>255</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">with open(join(&quot;D:\大三上学期\CAN201 网络\cw1ABC文件仓库\C仓库&quot;,send_file_pathname), &quot;wb&quot;) as f:</span><br></pre></td></tr></table></figure>

<h2 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h2><p>同时开启时候可以收到B/C的client_info_list</p>
<hr>
<h2 id="一个机器断开连接就不知道怎么办了"><a href="#一个机器断开连接就不知道怎么办了" class="headerlink" title="一个机器断开连接就不知道怎么办了"></a>一个机器断开连接就不知道怎么办了</h2><p>而且本机只能扫描到自己的一个文件-这是因为没有循环发文件<br>而且如果传有目录结构的文件，而并没有子文件夹就会写入不了<br>FileNotFoundError: [Errno 2] No such file or directory: ‘D:\大三上学期\CAN201 网络\cw1ABC文件仓库\A仓库\VMA_share\file1\file1.1\aaaa3’<br>写入的时候需要判断文件夹结构，创建目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 917, in _bootstrap_inner</span><br><span class="line">    self.run()</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 865, in run</span><br><span class="line">    self._target(*self._args, **self._kwargs)</span><br><span class="line">  File &quot;AllCS_A.py&quot;, line 217, in client_sendFile_to_server_job</span><br><span class="line">    tcpSendSocket.send(f&quot;&#123;send_file_pathname&#125;&#123;SEPARATOR&#125;&#123;send_file_size&#125;&#123;SEPARATOR&#125;&#123;send_file_block&#125;&quot;.encode())</span><br><span class="line">ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread Thread-16:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 917, in _bootstrap_inner</span><br><span class="line">    self.run()</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 865, in run</span><br><span class="line">    self._target(*self._args, **self._kwargs)</span><br><span class="line">  File &quot;AllCS_A.py&quot;, line 254, in client_file_handle_job</span><br><span class="line">    send_file_pathname, send_file_size,send_file_block = received.split(SEPARATOR)</span><br><span class="line">ValueError: not enough values to unpack (expected 3, got 1)</span><br><span class="line">---</span><br><span class="line">Exception in thread Thread-12:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 917, in _bootstrap_inner</span><br><span class="line">    self.run()</span><br><span class="line">  File &quot;D:\Python3.7.2\lib\threading.py&quot;, line 865, in run</span><br><span class="line">    self._target(*self._args, **self._kwargs)</span><br><span class="line">  File &quot;AllCS_A.py&quot;, line 218, in client_sendFile_to_server_job</span><br><span class="line">    tcpSendSocket.send(sendTitle)</span><br><span class="line">ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;压缩文件接收完成，开始解压&quot;)</span><br><span class="line">    print(&quot;解压前&quot;,join(&quot;recv_compress_dir&quot;, send_file_name))</span><br><span class="line">    print(&quot;解压后&quot;,join(localTestDirPath,send_file_pathname))</span><br><span class="line">    # 解压前 recv_compress_dir\我是CCC.txt</span><br><span class="line">    # 解压后 D:\大三上学期\CAN201 网络\cw1ABC文件仓库\A仓库\VMC_share\我是CCC.txt</span><br><span class="line">    </span><br><span class="line">FileNotFoundError: [WinError 3] 系统找不到指定的路径。: &apos;D:\\大三上学期\\CAN201 网络\\cw1ABC文件仓库\\A仓库\\VMC_share\\我是CCC.txt\\VMC_share&apos;</span><br></pre></td></tr></table></figure>

<h3 id="解决办法error"><a href="#解决办法error" class="headerlink" title="解决办法error"></a>解决办法error</h3><p>1.send(f””.encode()) 直接send不要变量<br>2.接收.decode(“utf8”,”ignore”)<br>3.接收的时候也不要用变量，直接decode()<br>4.通过socket用字符串发过去解码全是字符串，list不能遍历拿到字典。<br>必须发json字符串，再转成list,相当于都要发header</p>
<p>5.使用append()方法将dict内容追加到list时，发现值被覆盖</p>
<p>6.客户端请求+接收文件用while true 开一个socket请求一个文件写入，关socket;下一个文件请求再开socket</p>
<p>7.服务端接收请求不能加while true,因为服务端的socket一直在accept,接收到一次就分配一个线程。对方客户端关了，服务器这边也关了，会自动接收到下一个客户端的socket,然后开下一个线程。</p>
<p>8.tarfile解压会自动创建文件夹目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for one in file_detail_list:</span><br><span class="line">    # 本地测试规定死VMA server_port就是port2[0],VMB server_port就是port2[1],VMC server_port就是port2[2]</span><br></pre></td></tr></table></figure>

<p><strong>将dict声明，放在方法体内</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        if not os.path.isdir(join(root_path, file)):  # not a dir</span><br><span class="line">            self_file_detail_dict = &#123;&#125;  # 要改变的字典变量不能设置为全局变量,放在每次改值前面</span><br><span class="line">            file_path_new = join(root_path, file)</span><br><span class="line">            self_file_detail_dict[&apos;self_file_path&apos;]=file_path_new</span><br><span class="line">            self_file_detail_dict[&apos;self_file_name&apos;]=file</span><br><span class="line">            self_file_detail_dict[&apos;self_file_size&apos;]=getsize(file_path_new)</span><br><span class="line">            self_file_detail_dict[&apos;self_file_lastmodifytime&apos;]=getmtime(file_path_new)</span><br><span class="line">            self_file_detail_list.append(self_file_detail_dict)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">8.为yes了没有连接也没有发：因为while+条件=if+条件 只会执行一次</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    if self_update_message == &quot;YES&quot;:</span><br><span class="line"></span><br><span class="line">9.更新之后新建了两条一样的ticket,因为扫描文件的时候添加了一次self_more_files_paths_list,还把之前的文件信息修改了。</span><br><span class="line"></span><br><span class="line">### 虚拟机上测试要改的地方</span><br><span class="line">1.mkdir 12行里 \\ 换成 / </span><br><span class="line">2. 服务端绑定的端口号</span><br><span class="line">3.扫描线程0,1秒重启一次</span><br><span class="line"></span><br><span class="line">## 代码结构</span><br><span class="line">### 拿到变量</span><br><span class="line">1.本机服务端连接到两个客户端，接收两个客户端发的他们的文件list.存到自己的B,C机的字典里面。这时候已经有了三个机器ABC的文件列表了。</span><br><span class="line"></span><br><span class="line">所以，接下来做A和B,A和C文件列表的对比：</span><br><span class="line">对比只会出现两种情况：</span><br><span class="line">1.本机多了文件</span><br><span class="line">list对比结果：本机文件listA和拿到的listB，和listC都要多一部分</span><br><span class="line">self_more_files_path全局变量：保存本机多的文件path</span><br><span class="line">c/s:这时本机作为客户端，对B,C服务端发送多的文件</span><br><span class="line">---</span><br><span class="line">2.本机没有多文件</span><br><span class="line">本机检查自己文件夹内有无新/修改文件。</span><br><span class="line">【在扫描线程任务中还没写完】</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">【其实应该只检查本机文件的变化，有变化传，无变化等待。】</span><br><span class="line">【所以暂时不做ABC的比较，做文件传输】</span><br><span class="line">list对比结果：</span><br><span class="line">1.本机文件listA比拿到的listB少，和listC一样 </span><br><span class="line">c/s:这时本机作为服务端，接收B客户端发送多的文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.本机文件listA比拿到的listC少，和listB一样</span><br><span class="line">c/s:这时本机作为服务端，接收C客户端发送多的文件</span><br><span class="line"></span><br><span class="line">用？对比</span><br><span class="line">如果A的文件比B/C的文件都要多，</span><br><span class="line">A通过客户端发送线程通知B/C开启服务端接收线程；</span><br><span class="line">A要把 A比B/C多的文件 通过客户端发送线程发给B/C；</span><br><span class="line">B/C要在服务端接收线程，接收A发过来的文件。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">2.本机客户端给两个服务端发自己的文件list,收到服务端的回复的机子的文件list.(这里只作为消息发送成功的回复，不做文件变量修改。)</span><br><span class="line">---</span><br><span class="line">在文件path递归的时候还要拿到 文件的size 和文件的 lastmodifytime.</span><br><span class="line">用于本机检查自己文件夹内有无新文件。</span><br><span class="line">文件的size 和文件的 lastmodifytime就可以判断这个文件有没有变。</span><br><span class="line">文件变了【本机客户端线程】就要发个news给其他机器.</span><br><span class="line">中途挂掉的机器就看接收到了第几块文件，接收到了500块就从501块继续接收。</span><br><span class="line"></span><br><span class="line">Last Modify Time</span><br><span class="line">• os.path.getmtime(filename) -&gt; Unix timestamp (a float number)</span><br><span class="line">• Get file size:</span><br><span class="line">• os.path.getsize(filename) -&gt; number of bytes</span><br><span class="line">• Get file/folder list of a folder:</span><br><span class="line">• os.listdir(dir)</span><br><span class="line">• How to traverse the entire folder?</span><br><span class="line">---</span><br><span class="line">【本机服务端线程】接收其他机器有新文件的news,并且开始接收客户端的文件。</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">接收的压缩的文件存到临时文件夹，在临时文件夹解压缩之后再move到share文件夹</span><br><span class="line">---</span><br><span class="line">把数据包加密，两边都用对称加密的秘钥，用对称加密的库。</span><br><span class="line">发的时候加密，收的时候解密。</span><br><span class="line"></span><br><span class="line">### 函数功能</span><br><span class="line">main()</span><br><span class="line">1.ipList =命令行输入的ip的list</span><br><span class="line"></span><br><span class="line">2.t_file_scan扫描线程= 线程任务：get_file_job，参数：path = &apos;VMA_share&apos;</span><br><span class="line"></span><br><span class="line">4.tcp_server_recvData_thread本机服务端接收线程 = 线程任务：recvData_thread_job, args=(ipList,)</span><br><span class="line"></span><br><span class="line">5.tcp_client_sendData_thread本机客户端发送线程= target=sendData_thread_job, args=(ipList,)</span><br><span class="line"></span><br><span class="line">6.开启线程</span><br><span class="line"></span><br><span class="line">7.</span><br><span class="line">---</span><br><span class="line">全局变量</span><br><span class="line">all_files_path是share文件夹下的文件路径</span><br><span class="line">all_files_name是hare文件夹下的文件名，不带路径</span><br><span class="line"></span><br><span class="line">### 线程任务</span><br><span class="line">1.扫描线程任务</span><br><span class="line">def get_file_job(root_path):</span><br><span class="line">1.调用方法get_file(root_path, all_files_path,all_files_name)</span><br><span class="line">递归函数，遍历该文档目录和子目录下的所有文件，获取其path,和文件名</span><br><span class="line">---</span><br><span class="line">2.本机服务端接收线程任务，一对多</span><br><span class="line">def recvData_thread_job(ipList):</span><br><span class="line">1.全局变量</span><br><span class="line">global B_files_path</span><br><span class="line">global B_files_name</span><br><span class="line">2.服务器tcpRecvSocket</span><br><span class="line">3.myRecvPort服务器端口号</span><br><span class="line">4.服务器tcpRecvSocket绑定本机ip和端口号</span><br><span class="line">测试ABC时，C需要换成myRecvPort = ports[2]</span><br><span class="line">但是实际在虚拟机上ABC的服务器绑定本机ip和相同端口号</span><br><span class="line">5.服务器tcpRecvSocket监听</span><br><span class="line">6.while true </span><br><span class="line">接收客户端的socket 和(ip,port)</span><br><span class="line">给每个客户端创建一个独立的线程进行管理</span><br><span class="line">---</span><br><span class="line">2.1给每个客户端创建一个独立的线程进行管理</span><br><span class="line">def message_handle_for_client_job(clientSocket, destAddr):</span><br><span class="line">对接收的客户端进行处理:接收文件信息，回复本机文件信息</span><br><span class="line"></span><br><span class="line">每接收到一个客户端A_connected_client_nums+1；</span><br><span class="line"></span><br><span class="line">用A_connected_client_nums去对应client_who = [&apos;A&apos;,&apos;B&apos;,&apos;C&apos;]中的机器编号；</span><br><span class="line"></span><br><span class="line">用A_connected_client_nums去拿到client_info_list列表中对应的客户端信息字典对象-变量名which_client_info;</span><br></pre></td></tr></table></figure>

<p>客户端信息字典对象，B,C字典中的key: ‘client_ip’,’client_port’,’{client_who[A_connected_client_nums]}_files_path’,{client_who[A_connected_client_nums]}_files_name’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">## 虚拟机测试</span><br><span class="line">### 创建目录+执行</span><br><span class="line">workplace-cw1-share</span><br><span class="line"></span><br><span class="line">D:\virtualbox资源\putty.exe </span><br><span class="line">putty命令：cd cwd</span><br><span class="line">putty命令：cd workplace/cw1/</span><br><span class="line"></span><br><span class="line">192.168.56.102</span><br><span class="line">192.168.56.103</span><br><span class="line">192.168.56.104</span><br><span class="line">python3 main.py --ip 192.168.56.103,192.168.56.104 --encryption yes</span><br><span class="line">python3 main.py --ip 192.168.56.102,192.168.56.104 --encryption yes</span><br><span class="line">python3 main.py --ip 192.168.56.102,192.168.56.103 --encryption yes</span><br><span class="line">---</span><br><span class="line">python main.py --node u v w x</span><br><span class="line">---</span><br><span class="line">python3 main.py --node u v w x</span><br><span class="line">python3 main.py --node u v w x y</span><br><span class="line">python3 main.py --node u v w x y a b c</span><br><span class="line">添加文件软链接</span><br><span class="line">先</span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/toupdate.txt /home/tc/workplace/cw1/share/toupdate.txt</span><br><span class="line">后</span><br><span class="line">把修改的文件再拖过去 ruan</span><br><span class="line">----</span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/Software.pdf /home/tc/workplace/cw1/share/Software.pdf</span><br><span class="line">----</span><br><span class="line">1218.pdf</span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/Core.vmdk /home/tc/workplace/cw1/share/Core.vmdk</span><br><span class="line"></span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/Ambiguity.pdf /home/tc/workplace/cw1/share/Ambiguity.pdf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/CSE205-W5.pdf /home/tc/workplace/cw1/share/CSE205-W5.pdf</span><br><span class="line"></span><br><span class="line">ln -s /home/tc/workplace/cw1/ruan/CAN 2-11考试搜索.pdf /home/tc/workplace/cw1/share/CAN 2-11考试搜索.pdf</span><br><span class="line">## 虚拟机</span><br><span class="line">### 启动</span><br><span class="line">双击coreova</span><br><span class="line">core-运行启动</span><br><span class="line">右键terminal</span><br><span class="line">命令 ifconfig查看虚拟机ip:192.168.56.101</span><br><span class="line">在putty.exe 中执行命令</span><br><span class="line">---</span><br><span class="line">### putty.exe中执行命令</span><br><span class="line">D:\virtualbox资源\putty.exe </span><br><span class="line">双击putty.exe </span><br><span class="line">输入ip192.168.56.101</span><br><span class="line">login as: tc</span><br><span class="line">password:123 回车</span><br><span class="line">ssh tc@192.168.56.101 回车</span><br><span class="line">yes</span><br><span class="line">password:123 回车</span><br><span class="line"></span><br><span class="line">这样就已经成功的远程启动虚拟机</span><br><span class="line"></span><br><span class="line">继续：</span><br><span class="line">python3   显示python3.6.9</span><br><span class="line">which python3  显示/usr/local/bin/python3</span><br><span class="line">---</span><br><span class="line">lab10 </span><br><span class="line">pwd 查看当前所在位置</span><br><span class="line">17:52 建立文件夹cw1和share</span><br></pre></td></tr></table></figure>

<p>下面两行要一起执行<br>mkdir workplace<br>sudo mount /mnt/sda1 ./workplace/</p>
<p>ls 显示workplace/<br>cd workplace/<br>sudo mkdir cw1 目的：创建文件夹cw1<br>ls 显示：cw1/  lost+found/ tce/<br>cd cw1/ 目的：进入cw1文件夹再创建share文件夹<br>sudo mkdir share<br>cd .. 目的：返回到workplace<br>cd cw1/share/ 目的：进入share文件夹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">### 远程代码测试</span><br><span class="line">lab1 用专业版连接远程运行代码</span><br><span class="line">打开专业版2019.1.2pycharm,</span><br><span class="line">create project 文件名下面点箭头，选择existing interpreter的最右边的···打开，</span><br><span class="line">选择SSH Interpreter,</span><br><span class="line">new server下面填 host:192.168.56.101 , username:tc，密码：123</span><br><span class="line">(必须先开虚拟机并且右键打开命令行之后，再开D:\virtualbox资源\putty.exe ，最后开py)</span><br><span class="line">选择interpreter右边的···，找/usr/local/bin/python3，完成，创建</span><br><span class="line"></span><br><span class="line">测试运行之后：ssh://tc@192.168.56.101:22/usr/local/bin/python3 -u /tmp/pycharm_project_559/remote_run_test.py</span><br><span class="line"></span><br><span class="line">之后代码测试就用这个文件夹project:TC_Python</span><br><span class="line">---</span><br><span class="line">社区版可以安装paramiko，专业版不行</span><br><span class="line">---</span><br><span class="line">同一文件夹的文件 直接import xx.py</span><br><span class="line">解决：只有换一个路径新建工程才好，之前那个project就是要报错，没有办法</span><br><span class="line"></span><br><span class="line">21:20软链接</span><br><span class="line">### linux命令</span><br><span class="line">https://blog.csdn.net/luansj/article/details/97272672</span><br><span class="line">文件和目录 </span><br><span class="line">cd /home 进入 &apos;/ home&apos; 目录&apos; </span><br><span class="line">cd .. 返回上一级目录 </span><br><span class="line">cd ../.. 返回上两级目录 </span><br><span class="line">cd 进入个人的主目录 </span><br><span class="line">cd ~user1 进入个人的主目录 </span><br><span class="line">cd - 返回上次所在的目录 </span><br><span class="line">pwd 显示工作路径 </span><br><span class="line">ls 查看目录中的文件 </span><br><span class="line">ls -F 查看目录中的文件 </span><br><span class="line">ls -l 显示文件和目录的详细资料 </span><br><span class="line">ls -a 显示隐藏文件 </span><br><span class="line">ls * [0-9] * 显示包含数字的文件名和目录名 </span><br><span class="line">tree 显示文件和目录由根目录开始的树形结构</span><br><span class="line">lstree 显示文件和目录由根目录开始的树形结构</span><br><span class="line">mkdir dir1 创建一个叫做 &apos;dir1&apos; 的目录&apos; </span><br><span class="line">mkdir dir1 dir2 同时创建两个目录 </span><br><span class="line">mkdir -p /tmp/dir1/dir2 创建一个目录树 </span><br><span class="line">rm -f file1 删除一个叫做 &apos;file1&apos; 的文件&apos; </span><br><span class="line">rmdir dir1 删除一个叫做 &apos;dir1&apos; 的目录&apos; </span><br><span class="line">rm -rf dir1 删除一个叫做 &apos;dir1&apos; 的目录并同时删除其内容 </span><br><span class="line">rm -rf dir1 dir2 同时删除两个目录及它们的内容 </span><br><span class="line">mv dir1 new_dir 重命名/移动 一个目录 </span><br><span class="line">cp file1 file2 复制一个文件 </span><br><span class="line">cp dir/ * . 复制一个目录下的所有文件到当前工作目录 </span><br><span class="line">cp -a /tmp/dir1 . 复制一个目录到当前工作目录 </span><br><span class="line">cp -a dir1 dir2 复制一个目录 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 存放</span><br><span class="line">D:\virtualbox资源</span><br><span class="line">putty.exe </span><br><span class="line"></span><br><span class="line">## project要求</span><br><span class="line">老师的结构main：</span><br><span class="line">file scanner</span><br><span class="line">tcp listenser</span><br><span class="line">file downloader</span><br><span class="line">主函数开三个进程，最后和另外两个机器打招呼</span><br><span class="line">---</span><br><span class="line">file scanner： 无尽循环</span><br><span class="line">1.遍历share文件夹</span><br><span class="line">2.用文件size和lastmodifytime对比已存在的文件信息字典</span><br><span class="line">3.如果有任何变化，发送news【就是更新的文件信息字典装在list里面】【news转换为json字符串】给同伴，发送之前必须保证对方的服务器没有问题。</span><br><span class="line">---</span><br><span class="line">tcp listenser： </span><br><span class="line">1.listen a port(不是无尽循环可以终止)</span><br><span class="line">2.(无尽循环)有新的连接加入，就创建一个新线程，然后把连接传给新的子线程任务</span><br><span class="line">  子线程任务：</span><br><span class="line">  3个消息需要检查：news,hello,get_file request.</span><br><span class="line">  1.news【就是更新的文件信息list,他说的是传list】 如果接收到新的news就准备下载,不是立刻下载！！，只是给一个下载器ticket</span><br><span class="line">  2.hello 本机文件全部列表【接收别人的全部的文件list,返回自己的文件list】如果接收到新的news就留ticket给下载器准备下载</span><br><span class="line"></span><br><span class="line">  3.get_file: 请求需要的文件块。如果要文件传的快，要用长连接。</span><br><span class="line">---</span><br><span class="line">file downloader： 无尽循环 0.1秒扫描一次</span><br><span class="line">1.检查news文件list给的ticket</span><br><span class="line">2.下载最早的ticket</span><br><span class="line">  2.1.用list里的字典检查文件的size/lmt,如果本机的list存在这个文件名，而且size和lmt一致，就跳过不下载。</span><br><span class="line">  2.2.对于第一个文件块，创建空文件xxx.yyy.lefting(要创建文件夹)，用相同的size(填0)？？？</span><br><span class="line">  2.3.一个接一个的接收文件块，遇到任何的error都停止接收，删除，然后下载下一个文件，如果文件块已经接收成功，把记录写在ticket上(接收了几个文件块)</span><br><span class="line">  2.4.当文件全部接收，删除ticket,关闭文件，改文件名xxx.yyy.lefting.</span><br><span class="line">3.更新文件字典，本机的和临时的。</span><br><span class="line">---</span><br><span class="line">进程和线程之间共享的变量：</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">import threading</span><br><span class="line">import multiprocessing as mp</span><br><span class="line"></span><br><span class="line">两个全局变量给文件扫描线程 args=(g_peers,g_file_dict)，他说不用global</span><br><span class="line">g_peers = mp.Manager().list([])</span><br><span class="line">g_file_dict = mp.Manager().dict(&#123;&#125;)</span><br><span class="line">创建文件扫描进程/线程</span><br><span class="line">---</span><br><span class="line">协议：</span><br><span class="line">4bytes: json header size</span><br><span class="line">4bytes: binary data size</span><br><span class="line">json header(binary) ------- &quot;news&quot;: ,&quot;hello&quot;: ,&quot;get_file&quot;: ,</span><br><span class="line">binary data</span><br><span class="line">---</span><br><span class="line">tcp socket发送的东西需要符合协议</span><br><span class="line">---</span><br><span class="line">文件名</span><br><span class="line">share/123/456.txt,接收时做文件夹</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<h1 id="两个全局变量给文件扫描线程-args-g-peers-g-file-dict-，他说不用global"><a href="#两个全局变量给文件扫描线程-args-g-peers-g-file-dict-，他说不用global" class="headerlink" title="两个全局变量给文件扫描线程 args=(g_peers,g_file_dict)，他说不用global"></a>两个全局变量给文件扫描线程 args=(g_peers,g_file_dict)，他说不用global</h1><p>g_peers = mp.Manager().list([])<br>g_file_dict = mp.Manager().dict({})</p>
<p>STATE_READY =1<br>STATE_NOT_READY = 0<br>DEFAULT_PORT = 20000<br>BUFFER_SIZE_LAOSHI = 2<em>1024</em>1024<br>BLOCK_SIZE_LAOSHI = BUFFER_SIZE_LAOSHI/2<br>NO_FILE =  401<br>FILE_CHANGED = 402<br>OVER_BLOCK_INDEX = 403</p>
<p>def get_md5(b):</p>
<p>def make_package(d,b=None):</p>
<p>def get_tcp_package(connection)</p>
<h1 id="下面是file-scanner"><a href="#下面是file-scanner" class="headerlink" title="下面是file scanner"></a>下面是file scanner</h1><p>def file_scanner(folder, file_dict, file_dict_local,peers,state):</p>
<p>def print_file_dict(file_dict)</p>
<p>def traverse(dir_path):</p>
<p>def send_file_list(addr,file_list):</p>
<p>def save_file_dict(file_dict,fn):</p>
<h1 id="下面是file-下载器"><a href="#下面是file-下载器" class="headerlink" title="下面是file 下载器"></a>下面是file 下载器</h1><p>def file_downloader(file_dict, file_dict_local):</p>
<h1 id="下面-tcp-listener"><a href="#下面-tcp-listener" class="headerlink" title="下面 tcp listener"></a>下面 tcp listener</h1><p>def tcp_listener(server_port, file_dict, state):<br>    server_socket = socket(AF_INET,SOCK_STREAM)<br>    # 1.closesocket（一般不会立即关闭而经历TIME_WAIT的过程）后想继续重用该socket：<br>    server_socket.setsockopt(SOL_SOCKET ,SO_REUSEADDR,1)<br>    server_socket.bind((‘’,server_port))<br>    server_socket.listen(28)<br>    print(“start tcp server”)<br>    state[‘tcp_listener’] = STATE_READY<br>    while True:<br>        connection_socket, addr = server_socket.accept()<br>        print(“&lt;&lt; new connection from”, addr)<br>        th = threading.Thread(target=sub_connection, args=(connection_socket,addr,file_dict))<br>        th.daemon = True<br>        th.start()</p>
<p>def sub_connection(connection_socket,addr,file_dict):</p>
<p>def check_new_file(peer,remote_file_dict,file_dict):</p>
<h1 id="解析命令行用我自己的"><a href="#解析命令行用我自己的" class="headerlink" title="解析命令行用我自己的"></a>解析命令行用我自己的</h1><p>def say_hello(peers,file_dict):<br>    # 这里是客户端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">文件list区别：</span><br><span class="line">file1 A只有file1，B C 完全空</span><br><span class="line">file2 A有file1 B有file1+file2+一个新文件夹 C有file1</span><br><span class="line">file3 A有file1+2+一个新文件夹 B有file1+file2+一个新文件夹 </span><br><span class="line">        C有file1+2+一个新文件夹+file3</span><br><span class="line"></span><br><span class="line">修改前0.1%file3 </span><br><span class="line">A有file1+2+一个新文件夹+file3,B有file1+2+一个新文件夹+file3,</span><br><span class="line">C有file1+2+一个新文件夹+修改过的file3</span><br><span class="line">---</span><br><span class="line">对添加/修改的file3-判断文件有么有改变可以使用lastmodifytime</span><br><span class="line">然后task2是要重传，最好是续传，反正最后是要重新获取到完整的文件，你能续传自然快</span><br><span class="line">---</span><br><span class="line">三个虚拟机 三份代码 全部开启两个ip</span><br><span class="line"></span><br><span class="line">VMA开启一直跑while true 手动ctrl c结束，跑的时候不能报错误。</span><br><span class="line"></span><br><span class="line">在VMA项目代码文件夹中add file1 大概10mb到 VMA的“共享文件夹”。【共享在项目代码那个文件夹里】</span><br><span class="line"></span><br><span class="line">VMB开启无报错，VMB里的应用将拿到他add的file1 然后把它放到VMB的share文件夹中。他要检查VMB里的file1的md5,记录时间</span><br><span class="line"></span><br><span class="line">VMC开启无报错，VMC里的应用将拿到他add的file1 然后把它放到VMB的share文件夹中。他要检查VMC里的file1的md5,记录时间</span><br><span class="line"></span><br><span class="line">他要add 1个G的file2 和 一个任何名字的文件夹(装了50个文件) 到VMB的share文件夹中。</span><br><span class="line"></span><br><span class="line">1个G的file2 和 一个任何名字的文件夹(装了50个文件) 要同步到VMA和VMC的共享文件夹里</span><br><span class="line"></span><br><span class="line">在他把 1个G的file2 和 一个任何名字的文件夹(装了50个文件) 装到VMB之后，2s过后，他会手动结束掉VMA上的程序</span><br><span class="line"></span><br><span class="line">所有文件和文件夹会被同步到VMC。他会检查file2的md5,和文件夹中所有文件的md5，和记录file2和文件夹的时间</span><br><span class="line"></span><br><span class="line">他重启VMA上的程序，那么所有文件夹和文件应该和VMC上的一样，他会检查VMA上的md5</span><br><span class="line"></span><br><span class="line">他会add 200mb的file3 到VMC的共享文件夹</span><br><span class="line"></span><br><span class="line">200mb的file3要同步到VMA和VMB</span><br><span class="line"></span><br><span class="line">他会把VMC上的file3从第一个字节开始的 0.1%部分替换成其他的二进制数据。</span><br><span class="line"></span><br><span class="line">更新的file3文件会部分同步更新在VMA和VMB. 他会检查VMAVMB上的md5. 记录同步过去的时间</span><br><span class="line"></span><br><span class="line">压缩不会直接测试，但是file2(1个g)可以被压缩到很小的size</span><br><span class="line"></span><br><span class="line">数据安全性不会直接测试，他会检查代码。因为加密会浪费时间，</span><br><span class="line"></span><br><span class="line">请使用“--encryption yes”参数打开加密函数。</span><br><span class="line"></span><br><span class="line">每个app开两个ip是拿来找另外两台虚拟机的。设置接收两个Ip.</span><br><span class="line"></span><br><span class="line">file1,2,3是任意名字。</span><br><span class="line"></span><br><span class="line">尝试获取file最新的修改的时间去检测文件的更新。</span><br><span class="line">当一个新file已经完全被添加/更新了之后就开始传输。</span><br><span class="line"></span><br><span class="line">不要input()函数，自动启动</span><br><span class="line">自己分割他启动的ip 用argparse</span><br><span class="line">格式：</span><br><span class="line">For each virtual machine, your app will be started as:</span><br><span class="line">python3 main.py --ip 192.168.xxx.xxx,192.168.xxx.xxx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">VMA 开VMB 和VMC 的ip</span><br><span class="line">VMB 开VMA 和VMC 的ip</span><br><span class="line"></span><br><span class="line">VMC 开VMA 和VMB 的ip</span><br><span class="line"></span><br><span class="line">自己测试的时候用 paramiko </span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">要求</span><br><span class="line"></span><br><span class="line">Python socket实现大型的文件共享</span><br><span class="line">格式：任何格式，包括隐藏文件和文件夹</span><br><span class="line">大小：单个文件高达1GB</span><br><span class="line">自动：更改的文件可以自动同步</span><br><span class="line">部分更新：部分更改的文件可以部分更新 比如把他分成10blocks，对比md5就知道那部分是更新的，只更新那部分。</span><br><span class="line">压缩：压缩可用于减小总尺寸 压缩虽然要用cpu但是可以减轻带宽，你可以用?去决定这部分是需要压缩还是不压缩。对于bmp图片文件，可以压缩到非常小。用到压缩可以在下面测试中用更少的时间</span><br><span class="line">IP地址应设置为参数</span><br><span class="line">从中断中恢复：老师的办法：在这个host接收别的host传过来的文件的时候，建立两个文件，一个是data,一个是record.如果文件传输中断了，你可以读record知道到哪一个block了，然后重新接收这个block.</span><br><span class="line">任何文件无错误:老师会检查每个文件的md5</span><br><span class="line">错误恢复后不需要重新传输 自己找方法，他说是lecture学的</span><br><span class="line">数据传输安全 网上有很多方法，拿来用就能拿到分数</span><br><span class="line">应用层协议：您可以设计自己的协议</span><br><span class="line">传输层协议： TCP；或UDP；或混合。</span><br><span class="line">C/S(简单)</span><br><span class="line">可使用20000到30000之间的任何端口；</span><br><span class="line">您可以使用一个或多个端口。 老师建议一个note可以用十个多个port，可以加快传输速度</span><br><span class="line">多个py文件，老师建议这样做让代码更清晰，但是只有一个入口main.py</span><br><span class="line">但只有一个应用程序。“客户机”和“服务器”没有区别。</span><br><span class="line">通用模块：os, sys, socket, struct, hashlib, math, tqdm, numpy</span><br><span class="line">用于加密的任何模块</span><br><span class="line"></span><br><span class="line">任何压缩模块</span><br><span class="line"></span><br><span class="line">Struct: 使用struct模块将文件名和大小转化为二进制串发送给接收方</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">1.  Any code error, any code error!!!</span><br><span class="line"></span><br><span class="line">A: I will not help you with any code error. You are learning network module. You are using the Internet to send me an email and you can search and debug using the Internet. Try google, StackOverflow and Github. </span><br><span class="line"></span><br><span class="line">2.  About resending files after unexpected interruption:</span><br><span class="line"></span><br><span class="line">A: Please refer to “Code testing steps”- 9</span><br><span class="line"></span><br><span class="line">3.  Why 2 IP addresses are given for testing the code?</span><br><span class="line"></span><br><span class="line">A: These 2 IP addresses are used to find the other two machines. Actually, it is better for you to support a flexible number of machines. But, let’s do it simply. I only test the case of three machines. </span><br><span class="line"></span><br><span class="line">4.  Don’t know how to start.</span><br><span class="line"></span><br><span class="line">A: Firstly, open PyCharm. Secondly, start to write something. Thirdly, run, and debug your code. Flowchart and FSM will help you and make your mind clear. Maybe a cup of espresso will also make you better. BTW, my office hour is prepared for you. Come to talk with me without an appointment during office-hour.</span><br><span class="line"></span><br><span class="line">5.  Filename problem.</span><br><span class="line"></span><br><span class="line">A: Normally, we don’t include space in the file name. So, File 1 will not be the name. I will use any file name. </span><br><span class="line"></span><br><span class="line">6.  How to start transmission?</span><br><span class="line"></span><br><span class="line">A: Start to transfer when a new file is already added or updated (try to get the last modification time of a file to detect the updating). After running your code (app), I will not directly operate your app, which means I will not input any command to your app. All the functions of your app should be auto.</span><br><span class="line"></span><br><span class="line">7.  How to add a file to the “share” folder of CWD?</span><br><span class="line"></span><br><span class="line">A: For me, I will use soft link of Linux (ln -s) to add a file withing coping tile. If you want to simulate this operation. Please use “ln -s /xxx/xxx/file_xxx.big /xxx/xxx/CWD/share/file_xxx.big”. If you want to update the original file. Please “rm” the link and add the link again: </span><br><span class="line"></span><br><span class="line">rm /xxx/xxx/file_xxx.big /xxx/xxx/CWD/share/file_xxx.big</span><br><span class="line"></span><br><span class="line">ln -s /xxx/xxx/file_xxx.big /xxx/xxx/CWD/share/file_xxx.big</span><br><span class="line"></span><br><span class="line">8.  How to transfer a big file from your computer to the virtual machine (core CW1)?</span><br><span class="line"></span><br><span class="line">A: As the space of the root of the virtual machine is not very big, you should mount another driver to the home folder. Open the terminal of virtual machine and follow me please:</span><br></pre></td></tr></table></figure>

<p>cd ~</p>
<p>mkdir data</p>
<p>sudo mount /mnt/sda1 ~/data/</p>
<p>sudo chown tc ~/data</p>
<p>Back to your OS:</p>
<p>  For macOS, open terminal:</p>
<pre><code>scp big_file tc@192.168.53.x:/home/tc/data/</code></pre><p>  For Windows, pscp can be found in a full putty package. </p>
<pre><code>pscp big_file tc@192.168.53.x:/home/tc/data/</code></pre><p>or xshell is better but not free.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">9.  About hidden file:</span><br><span class="line"></span><br><span class="line">A: No hidden file will be tested.</span><br><span class="line"></span><br><span class="line">10. How to understand server and client:</span><br><span class="line"></span><br><span class="line">A: Your app can send a file to another machine and can receive it from another machine. Don&apos;t play word games</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 进展</span><br><span class="line">- 11.16压缩加传输：</span><br><span class="line">client: 把filename压缩到tar_file路径再向服务器发送tar_file</span><br></pre></td></tr></table></figure>

<p>filename = “D:\材料-公众号-爬虫小说\py爬取的文件\小说\慎言bl”</p>
<h1 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h1><p>tar_file = “D:\大三上学期\CAN201 网络\Projects作业1\文件传输测试\客户端\中文压缩.tar.gz”<br>compressB.compress(tar_file,[filename])</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serve: 最后一行 把接收的文件filename(在py项目下面)解压到文件解压后小说文件夹(在py项目下面)</span><br></pre></td></tr></table></figure>

<p>compressB.decompress(filename, “解压后小说”)<br>```</p>
<h3 id="材料"><a href="#材料" class="headerlink" title="材料"></a>材料</h3><p>1.py-csdn-第一个速度慢<br>讲解tcp udp <a href="https://blog.csdn.net/qq_38898129/article/details/89300413" target="_blank" rel="noopener">https://blog.csdn.net/qq_38898129/article/details/89300413</a><br>tcp代码 <a href="https://blog.csdn.net/qq_38898129/article/details/89481229" target="_blank" rel="noopener">https://blog.csdn.net/qq_38898129/article/details/89481229</a><br>udp代码 <a href="https://blog.csdn.net/qq_38898129/article/details/89319767" target="_blank" rel="noopener">https://blog.csdn.net/qq_38898129/article/details/89319767</a></p>
<h2 id="handbook"><a href="#handbook" class="headerlink" title="handbook"></a>handbook</h2><p>管理他们的操作，成功的计算机网络的设计和组织原则，以及当代互联网中使用的关键协议和技术。<br>[A] 计算基本网络性能统计数据（例如平均吞吐量），给定<br>网络配置和参数。<br>[B] 应用标准网络算法，如（距离向量、ARP发现，<br>虚拟电路设置）针对具体问题，演示中间和最终<br>州。<br>[C] 分析并实现标准网络协议的简单版本。<br>[D] 在给定一组期望的网络参数的基础上，设计新的协议来解决<br>该网络的具体目标<br>[E] 为给定问题选择并使用现有的网络安全协议 </p>
<h2 id="lab"><a href="#lab" class="headerlink" title="lab"></a>lab</h2><p>每周二上午11点 SC464<br>做python和networking, 有签到</p>
<h2 id="syllabus课程安排"><a href="#syllabus课程安排" class="headerlink" title="syllabus课程安排"></a>syllabus课程安排</h2><p>w1: networking基础理论<br>    编译器<br>w2: application layer应用层 principles,web,http<br>    基本语法<br>w3: application layer应用层 email,dns,p2p,多媒体协议protocols<br>    数据结构：列表和字典<br>w4: 传输层 multiplexing,udp,可靠数据传输<br>    文件操作，网络编程<br>w5: 传输层 tcp,堵塞<br>    协议，解析包<br>w6: 网络层 router,internet,IPv4,IPv6<br>    模块，PIP<br>w8: 网络层 routing算法，control plane<br>    OOP<br>w9: 连接层 error correction,ethernet<br>    平行计算<br>w10: 连接层 link visualization 课上test<br>     应用<br>w11: 物理层 硬件交流媒体<br>      intro,switch setup<br>w12: 网络安全 公钥，授权<br>     配置switch接口<br>w13: 网络安全 公钥，授权<br>     VLAN 配置<br>w14: 复习和quiz<br>     router setup</p>
<h2 id="lecture"><a href="#lecture" class="headerlink" title="lecture"></a>lecture</h2><h3 id="w1-networking基础理论"><a href="#w1-networking基础理论" class="headerlink" title="w1 networking基础理论"></a>w1 networking基础理论</h3><p>1.什么是internet<br>2.什么是协议</p>
<p>Protocols define <strong>format, order of</strong><br><strong>messages sent and received</strong> among<br>network entities, and <strong>actions taken</strong> on<br>message transmission, receipt</p>
<p>(All communication activity in<br>Internet governed by protocols)</p>
<p>3.看不下去了<br>4.网络安全</p>
<p>网络<em>带宽</em>是指在单位时间（一般指的是1秒钟）内能传输的数据量。</p>
<h3 id="w4"><a href="#w4" class="headerlink" title="w4"></a>w4</h3><h3 id="w5"><a href="#w5" class="headerlink" title="w5"></a>w5</h3><h3 id="w6"><a href="#w6" class="headerlink" title="w6"></a>w6</h3><h2 id="lab-1"><a href="#lab-1" class="headerlink" title="lab"></a>lab</h2><h3 id="lab6-MODOULE-PIP"><a href="#lab6-MODOULE-PIP" class="headerlink" title="lab6 MODOULE,PIP"></a>lab6 MODOULE,PIP</h3><p>模块：<br>Python 提供了一个办法，把这些定义存放在文件中，为一些脚本或者交互式的解释器实例使用，这个文件被称为模块。</p>
<p>怎么用模块：<br>import module_name<br>from module_name import methods</p>
<p>A.py<br>import A<br>就可以用 A.方法名()</p>
<p>A.py<br>from A import 方法1名<br>就可以用 方法1() 调用A中的这个方法</p>
<p>文件夹-A.py<br>from 文件夹名 import A</p>
<h2 id="就可以用-A-方法名"><a href="#就可以用-A-方法名" class="headerlink" title="就可以用 A.方法名()"></a>就可以用 A.方法名()</h2><p>并行计算：<br>import multiprocessing 进程库<br>import threading 线程库</p>
<h2 id="multiprocessing-在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。"><a href="#multiprocessing-在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。" class="headerlink" title="multiprocessing 在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。"></a>multiprocessing 在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。</h2><p>thread 和 process的代码非常相似</p>
<h2 id="复制粘贴尝试lab6的代码"><a href="#复制粘贴尝试lab6的代码" class="headerlink" title="复制粘贴尝试lab6的代码"></a>复制粘贴尝试lab6的代码</h2><p>用thread 或者 process</p>
<h2 id="老师喜欢process进程"><a href="#老师喜欢process进程" class="headerlink" title="老师喜欢process进程"></a>老师喜欢process进程</h2><h2 id="作业1"><a href="#作业1" class="headerlink" title="作业1"></a>作业1</h2><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>老师用mac path /a/b<br>windows是\a\b</p>
<h2 id="王道考研"><a href="#王道考研" class="headerlink" title="王道考研"></a>王道考研</h2><h3 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h3><ul>
<li>计算机网络的功能：</li>
</ul>
<p>1.数据共享<br>2.资源共享<br>3.分布式处理 多台计算机共同承担同一工作任务的不同部分 hadoop平台<br>4.提高可靠性 一台崩了有替代机<br>5.负载均衡 分布式处理达到的效果，工作任务均衡的分配给各台计算机</p>
<ul>
<li>计算机网络的组成</li>
</ul>
<p>1.组成部分 硬件，软件，协议<br>2.工作方式<br>    边缘部分(用户直接使用)：c/s方式-客户端服务器；p2p对等方式<br>    核心部分： 为边缘部分服务<br>3.通信子网，资源子网</p>
<ul>
<li>计算机网络的分类</li>
</ul>
<p>1.分布范围分类： 广域网WAN(跨国)，城域网MAN(跨城)，局域网LAN(千米)，个人区域网PAN<br>2.按照使用者分：共用网，专用网<br>3.按交换结构分：电路，报文，分组交换<br>4.按拓扑结构分</p>
<h2 id="5-按传输技术分"><a href="#5-按传输技术分" class="headerlink" title="5.按传输技术分"></a>5.按传输技术分</h2><h2 id="标准化"><a href="#标准化" class="headerlink" title="标准化"></a>标准化</h2><p>性能指标：<br>利用率 信道利用率<br>速率<br>带宽 理想条件下<br>吞吐量 1s能接受多少数据 throughput: min{Rc , Rs , R/10}<br>时延 传播，传输过程<br>时延带宽积 传播时延带宽相乘</p>
<p>网络<em>带宽</em>是指在单位时间（一般指的是1秒钟）内能传输的数据量。</p>
<h2 id="往返时间"><a href="#往返时间" class="headerlink" title="往返时间"></a>往返时间</h2><p>网络结构-分层结构：<br>协议[水平]：对等实体之间的功能的规定，规定他们之间可以做什么事情，有什么功能，所有是水平协议<br>协议的三个约定：语法(传输数据格式)，语义(完成的功能)，同步(数据报操作顺序)</p>
<p>接口：上层使用下层的入口<br>    仅仅在相邻层直接有接口，为上层提供接口，屏蔽细节</p>
<p>服务[垂直]：下层为相邻上层提供功能调用<br>    每一个中间层次都是为上层提供服务，用下层所有层次的服务总和</p>
<hr>
<p>ISO/OSI参考模型</p>
<h2 id="理论成功，市场失败"><a href="#理论成功，市场失败" class="headerlink" title="理论成功，市场失败"></a>理论成功，市场失败</h2><h2 id="TCP-IP模型-和-五层参考模型"><a href="#TCP-IP模型-和-五层参考模型" class="headerlink" title="TCP/IP模型 和 五层参考模型"></a>TCP/IP模型 和 五层参考模型</h2><h3 id="王道考研-第二章-物理层"><a href="#王道考研-第二章-物理层" class="headerlink" title="王道考研 第二章 物理层"></a>王道考研 第二章 物理层</h3><h3 id="王道考研-第六章-应用层"><a href="#王道考研-第六章-应用层" class="headerlink" title="王道考研 第六章 应用层"></a>王道考研 第六章 应用层</h3><p><a href="https://blog.csdn.net/vip97yigang/article/details/78306837?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener">https://blog.csdn.net/vip97yigang/article/details/78306837?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</a></p>
<p><a href="https://blog.csdn.net/FanceFu/article/details/79357105?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener">https://blog.csdn.net/FanceFu/article/details/79357105?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param</a></p>
<h4 id="Application-architectures"><a href="#Application-architectures" class="headerlink" title="Application architectures"></a>Application architectures</h4><p>​    1.client-server 客户端-服务器：<br>​    应用：web,文件传输FTP,远程登录，电子邮件</p>
<pre><code>2.P2P 对等模型：
网络中的传输内容都不会保存在服务器上，每个节点都有上传/下载的功能。每个主机可以提供服务也可以请求服务。任意节点之间都可以直接通讯。网络健壮性强(一个结点坏掉不影响)。</code></pre><hr>
<p>• Application service requirements<br>• reliability, bandwidth, delay<br>• Internet transport service model<br>• connection-oriented, reliable: TCP</p>
<p>• unreliable, datagrams: UDP</p>
<p>• Specific protocols:<br> HTTP<br> SMTP, POP, IMAP<br> DNS<br> P2P: BitTorrent</p>
<h4 id="电子邮件系统SMTP-POP-IMAP"><a href="#电子邮件系统SMTP-POP-IMAP" class="headerlink" title="电子邮件系统SMTP, POP, IMAP"></a>电子邮件系统SMTP, POP, IMAP</h4><p>一个电子邮件系统由三部分组成：用户代理、邮件服务器以及邮件发送协议和读取协议。<br>发送协议常用 SMTP，读取协议常用 POP3 和 IMAP。</p>
<p>POP3 简单读取<br>POP3 的特点是只要用户从服务器上读取了邮件，就把该邮件删除。<br>从接受邮件服务器读取邮件到用户代理(客户端)</p>
<p>IMAP 比pop3复杂<br>IMAP 协议中客户端和服务器上的邮件保持同步，如果不去手动删除邮件，那么服务器上的邮件也不会被删除。IMAP 这种做法可以让用户随时随地去访问服务器上的邮件。IMAP 协议也支持创建自定义的文件夹。<br>从接受邮件服务器读取邮件到用户代理(客户端)</p>
<p>SMTP<br>SMTP 只能发送 ASCII 码(不能传送可执行文件/对象)，而互联网邮件扩充 MIME 可以发送二进制文件。MIME协议 并没有改动或者取代 SMTP，而是增加邮件主题的结构，定义了非 ASCII 码的编码规则(让他能传非ASCII 码)。</p>
<p>SMTP简单邮件传送协议过程：1.连接建立2.邮件发送3.连接释放</p>
<hr>
<h4 id="域名系统DNS-DNS服务器给域名返回ip地址"><a href="#域名系统DNS-DNS服务器给域名返回ip地址" class="headerlink" title="域名系统DNS (DNS服务器给域名返回ip地址)"></a>域名系统DNS (DNS服务器给域名返回ip地址)</h4><p>例：某用户通过主机A浏览西安交大的主页 <a href="http://www.xjtu.edu.cn" target="_blank" rel="noopener">www.xjtu.edu.cn</a></p>
<ol>
<li>A向本地域名服务器DNS查询</li>
<li>如果DNS上有<a href="http://www.xjtu.edu.cn的记录，就立即返回IP地址给主机A" target="_blank" rel="noopener">www.xjtu.edu.cn的记录，就立即返回IP地址给主机A</a><br>(cn顶级域名，edu二级域名，xjtu三级域名，www四级域名)</li>
<li>如果DNS上没有该域名记录，则DNS向根域名服务器发出查询请求</li>
<li>根域名服务器把负责cn域的顶级域名服务器B的IP地址告诉DNS</li>
<li>DNS向B查询获得二级域名服务器C的IP地址，最终迭代查询到<a href="http://www.xjtu.edu.cn的ip直接返回DNS" target="_blank" rel="noopener">www.xjtu.edu.cn的ip直接返回DNS</a></li>
</ol>
<p>递归查询Recursive query(靠别人一条线查下去再原路返回给主机,比较少用)：主机发出DNS查询请求-去 跟域名服务器 查顶级域名的ip地址(com/edu/org)-去找对应的 顶级域名服务器 查顶级域名注册的所有二级域名的ip(baidu.com)-权限域名服务器</p>
<p>迭代查询Iterated query(靠自己)：主机找y.abc.com的ip地址-本地域名服务器找根域名服务器-根域名服务器告诉找哪个顶级域名服务器-本地域名服务器去找顶级域名服务器-顶级域名服务器告诉应该找哪个权限域名服务器-查到ip地址-返回给本地域名服务器-返回给主机。（实现给域名返回ip地址）</p>
<p>• Socket programming:</p>
<h4 id="传输协议是UDP还是TCP"><a href="#传输协议是UDP还是TCP" class="headerlink" title="传输协议是UDP还是TCP"></a>传输协议是UDP还是TCP</h4><p>FTP文件传送协议(提供不同种类主机系统之间的文件传输能力 上传/下载)<br>运输层<br>使用UDP和TCP协议的各种应用和应用层协议<br>应用    应用层协议    运输层协议<br>名字转换    DNS(域名系统)    UDP<br>文件传送    TFTP(简单文件传送协议)    UDP<br>路由器选择协议    RIP(路由信息协议)    UDP<br>IP地址配置    DHCP(动态主机配置协议)    UDP<br>网络管理    SNMP(简单网络管理协议)    UDP<br>远程服务器    NFS(网络文件系统)    UDP<br>多播    IGMP(网际组管理协议)    UDP<br>电子邮件    SMTP(简单邮件传送协议)    TCP<br>远程终端    TELNET(远程终端协议)    TCP<br>万维网    HTTP(超文本传送协议)    TCP<br>文件传送    FTP(文件传送协议)    TCP</p>
<p>网络电话   UDP</p>
<p>万维网WWW是无数个网页的集合<br>URL形式(不分大小写)： &lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</p>
<p>超文本传输协议</p>
<p>1.W3C<br>World Wide Web Consortium(万维网联盟)<br>Web技术领域的国际中立性技术标准机构</p>
<p>2.W3C标准<br>结构化标准语言(html,xml)<br>表现性标准语言(css)</p>
<p>行为标准(dom文档对象模型,ecmascript JS的规范)</p>
<h2 id="认识http-https"><a href="#认识http-https" class="headerlink" title="认识http,https"></a>认识http,https</h2><ul>
<li>http: 超文本传输协议（用TCP）<ul>
<li>以明文形式传输</li>
<li>效率更高，但是不安全</li>
</ul>
</li>
<li>https: http + ssl(TCP的加强版，称为安全套接字层（Secure Sockets Layer，SSL）)<ul>
<li>传输之前数据先加密，之后解密获取内容</li>
<li>效率较低，但是安全</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>http协议之请求报文</p>
<ul>
<li><p>1.请求行 get url http/1.1 || 方法 url 版本 CRLF(回车换行)</p>
</li>
<li><p>2.请求头：</p>
<ul>
<li>host:域名，不是ip</li>
<li>connection：keep-alive 客户端告诉服务端我们支持使用长连接，不频繁的建立、断开连接。只在最开始建立，最后断开。(服务器在发送响应后保持该TCP连接打开，后续的请求和响应报文能通过相同的连接进行发送。)只需要进行一次 TCP 连接就能进行多次 HTTP 通信。HTTP/1.1开始，所有的连接默认都是持久连接。</li>
<li>cache-control: max-age=0 缓存控制。客户端告诉服务端不做任何缓存</li>
<li>user-agent: 浏览器的身份标识。对方服务器知道你是什么浏览器在请求服务器。</li>
<li>cookie: 保存浏览器本地的用户信息。访问网站带上cookie。如果要请求登录之后才能访问的网站就要处理cookie.</li>
</ul>
</li>
<li><p>3.请求体</p>
<hr>
<p>例子：Remote<a href="http://www.chinabyte.com/keyword/address/" target="_blank" rel="noopener"> Address</a>:116.57.254.104:80 Request URL:<a href="http://hr.tencent.com/" target="_blank" rel="noopener">http://hr.tencent.com/</a> Request Method:GET Status Code:200 OK Request Headers GET / HTTP/1.1 Host: hr.tencent.com Connection: keep-alive Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,<em>/</em>;q=0.8 User-Agent:<a href="http://www.chinabyte.com/keyword/Mozilla/" target="_blank" rel="noopener"> Mozilla</a>/5.0</p>
</li>
</ul>
</li>
<li><p>http协议之响应报文</p>
<p>初始状态行（status line），首部行（header line）和实体体（entity body），实体体部分是报文的主要部分，即它包含了所请求的对象本身。状态行有三个字段：协议版本字段（the protocol version field）、状态码(statuscode)和相应状态信息(corresponding status message)。</p>
<ul>
<li>1.响应头<ul>
<li>set-cookie: 对方服务器通过该字段设置cookie到本地</li>
</ul>
</li>
<li>2.响应体<ul>
<li>url地址对应的响应</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="秦jiajun-应用层"><a href="#秦jiajun-应用层" class="headerlink" title="秦jiajun-应用层"></a>秦jiajun-应用层</h2><p>一、应用层核心原理Principles of Network Applications</p>
<ol>
<li>（Eng.verP112, 中译版P54-55）研发网络应用程序的核心是写出能够运行在不同的端系统和通过网络彼此通信的程序。<br>当研发新应用程序时，不需要写在网络核心设备如路由器或链路层交换机上运行的软件，因为网络核心设备并不在应用层上起作用，而仅在较低层起作用。</li>
<li>网络应用程序体系结构（主流有两种）<br>Ⅰ. 客户-服务器体系结构（client-server architecture）<br>服务器Server：一台总是打开的主机<br>有固定的、周知的地址<br>性能高<br>客户Client：与服务器连接来请求服务<br>间歇性连接网络<br>有动态的地址<br>客户互相之间不直接通信<br>Ⅱ.P2P体系结构（P2P architecture）<br>主机对之间使用直接通信，这些主机被称为对等方（peers）<br>对等方从其他对等方请求服务，并向其他对等方提供服务。<br>自拓展性（Self-scalability）：具体见（Eng.verP115, 中译版P57）<br>对等方之间间歇连接<br>IP地址是动态的<br>（P2P有自拓展性，其体系结构成本效率高，因为是点对点的模型，其传输速度更加快速，类似文件共享、对等方协助下载器（如迅雷）、网络视频电话等都用P2P体系结构）</li>
<li>进程（Process）通信（Eng.verP116-118, 中译版P57-59）<br>1）<br>Processesin different/same hosts:<br>当进程运行在同一个端系统（host）上时，它们使用进程间通信机制相互通信。当进程运行在不同的端系统上时，它们通过跨越计算机网络的报文（message）相互通信<br>在一对进程之间的通信会话场景中，发起通信的进程被标识为客户（Client），在会话开始时等待联系的进程是服务器（Sever）<br>在某些P2P应用中，一个进程可能既是客户也是服务器。<br>2）进程寻址（Addressing Processes）<br>为了接收进程，需要定义两种信息<br>①主机的地址：在因特网中，主机有单独的唯一标识的32-bit（IPV4）and/or128-bit（IPV6）的量叫做IP地址（IP Address）<br>②在目的主机中指定接收进程（更具体应为接收套接字socket）的标识符：目的地端口号port number）<br>Q: Can a process have multiple network identifiers?<br>A: Yes.</li>
<li>可供应用程序使用的运输服务<br>四类应用程序服务要求：</li>
</ol>
<p>[1]四类应用程序服务要求(ppt16页)<br>选择的网络应用要求：</p>
<p>[2]选择的网络应用要求(ppt17页)<br>4.因特网提供的运输服务（详见Eng.verP121-124, 中译版P60-62）<br>Ⅰ.TCP<br>TCP提供可靠的数据传送服务<br>TCP具有拥塞控制机制<br>TCP具有面向连接服务<br>TCP不提供timing,minimum throughput guarantee, security的保证。<br>Ⅱ. UDP<br>UDP服务是一种不提供不必要服务的轻量级运输协议。它仅提供最小服务。<br>UDP是无连接的也就是说通信之前没有握手；UDP不提供数据的可靠传输；UDP也没有拥塞控制机制。<br>注：看起来UDP服务并不是很好，但仍然有应用首先选择UDP服务（如因特网电话应用），因为它们能够容忍某些丢失但要求达到一定的最小速率才能有效工作，运行在UDP上能够设法避开TCP的拥塞控制机制和分组开销。但同时也因许多防火墙被配置成阻挡（大多数类型的）UDP流量，所以因特网电话应用通常设计成如果UDP通信失败就用TCP作为备份（详见Eng.verP123, 中译版P62）</p>
<p>[3]流行的因特网应用及其应用层协议和支撑的运输协议(ppt12页)<br>5.SSL（详见Eng.verP122, 中译版P61）<br>简单来说，TCP和UDP都没有提供任何加密机制，而隐私和其他安全问题对许多应用而言至关重要，所以因特网界研发出了TCP的加强版，称为安全套接字层（Secure Sockets Layer，SSL）。注意，SSL并不是与TCP和UDP在同层次上的第三种运输协议，而是一种对TCP的加强，其强化在应用层上实现。用SSL加强后，TCP不仅能够做传统TCP所能做的一切，而且提供了关键的进程到进程的安全性服务。<br>二、Web和HTTP<br>1.HTTP概况<br>1）HTTP——超文本传输协议（Hyper Text Transfer Protocal），它是Web的应用层协议，是Web的核心。HTTP有两部分实现，一个客户端程序一个服务器程序。<br>2）Web页面（WebPage）是由对象（object）组成，它们通过一个URL地址进行寻址。多数Web页面含有一个HTML基本文件（base HTML file）以及几个引用对象。URL地址由两部分组成：存放对象的服务器主机名和对象的路径名。客户和服务器交互的核心思想是客户通过HTTP请求对服务器发出对Web页面的请求报文，服务器收到该报文后将返回包含该对象的HTTP响应报文。（详细解释和例子见Eng.verP126-127，中译版P64-65）<br>3）HTTP使用TCP作为它的支撑运输协议。<br>步骤：①HTTP客户首先发起一个与服务器的TCP连接，port80<br>②服务器接受TCP连接<br>③HTTP报文从客户端（browser）和服务器（Webserver）之间传递。<br>④关闭TCP连接<br>HTTP是无状态协议（statelessprotocol）——服务器根据请求作出响应，但是不存储任何关于该客户的状态信息。<br>2.非持续连接和持续连接（Non-Persistentand Persistent Connections）（详见Eng.verP128-131，中译版P65-67）<br>非持续连接：每个请求/响应（request/response）经一个单独的TCP连接发送<br>持续连接：所有的请求及响应经相同的TCP连接发送<br>HTTP在其默认情况下使用持续连接，但也可配置成非持续连接。<br>Ⅰ. 采用非持续连接的HTTP：<br>从服务器向客户传送一个Web页面的步骤（步骤和例子详见Eng.ver P129，中译版P66）<br>每个TCP连接在服务器发送一个对象后就会关闭，即每个TCP只传送一个请求报文和响应报文。<br>往返时间（Round-TripTime, RTT）——timefor a small packet to travel from client to server and back roundtrip time 该时间是指一个短分组从客户到服务器然后再返回客户所花的时间。</p>
<p>[4] 请求并接收一个HTML文件所需的时间估算(ppt34页)<br>上图为请求并接收一个HTML文件所需的时间估算。浏览器在它和Web服务器之间发起一个TCP连接，即为“三次握手（three-way handshake）”的过程，即客户向服务器发送一个小TCP报文段，服务器用一个小TCP报文段做出确认和响应，最后客户向服务器返回确认。三次握手中前两部分耗时一个RTT。客户结合第三次握手（确认）向该TCP连接发送一个HTTP请求报文，一旦该请求报文到达服务器，服务器便在该TCP连接上发送HTML文件。该HTTP请求/响应用去另一个RTT。粗略地说，总的响应时间为两个RTT加上服务器传输HTML文件的时间。<br>Ⅱ.采用持续连接的HTTP<br>非持续连接大致有两个缺点：1）必须为每一个请求的对象建立和维护一个全新的连接，这可能给Web服务器带来严重的负担。2）每一个对象经受两倍RTT的交付时延。<br>持续连接的特点：服务器在发送响应后保持该TCP连接打开，后续的请求和响应报文能通过相同的连接进行发送。对对象的请求可以一个接一个地发出，而不必等待对未决请求的回答。对于所有引用的对象几乎只需要一个RTT。<br>Q:Is persistent HTTP perfect?<br>A:No. It depends on the environment. If you want to save bandwidths,the persistent HTTP is better, but if you want to increase the speed,the non-persistent HTTP is better. (毕竟用户能够配置现代浏览器来控制连接的并行度，详见Eng.verP129，中译版P66)</p>
<p>3.HTTP报文格式（HTTP Message Format）(Eng.verP131-136，中译版P67-70)<br>HTTP报文有两种：请求报文和响应报文。<br>Ⅰ.HTTP请求报文（HTTPrequest message）</p>
<p>[5]典型的HTTP请求报文（PPT37-38页）<br>HTTP请求报文的第一行叫做请求行（requestline），其后继的行叫做首部行（headerline）。请求行有三个字段：方法字段、URL字段和HTTP版本字段。</p>
<p>[6]一个HTTP请求报文的通用格式(ppt第41页)<br>HTTP1.1 的方法：</p>
<p>[7]HTTP 1.0 1.1的方法字段的值（PPT43页）<br>HTTP报文内容及方法用法需要看Eng.verP131-133，中译版P67-68.<br>Ⅱ.HTTP响应报文（详见Eng.verP133-136，中译版P69-70）</p>
<p>[8]一个HTTP响应报文的通用格式<br>http请求报文格式和响应报文格式<br><a href="https://blog.csdn.net/bamboo_cqh/article/details/90403740" target="_blank" rel="noopener">https://blog.csdn.net/bamboo_cqh/article/details/90403740</a><br>响应报文有三个部分：初始状态行（status line），首部行（header line）和实体体（entity body），实体体部分是报文的主要部分，即它包含了所请求的对象本身。状态行有三个字段：协议版本字段（the protocol version field）、状态码(statuscode)和相应状态信息(corresponding status message)。<br>一些常见的状态码和相关的短语：<br>200 OK：请求成功，信息在返回的响应报文中。<br>301 MovedPermanently：请求的对象已经被永久转移了，新的URL定义在响应报文的Location：首部行中。客户软件将自动获取新的URL。<br>400 Bad Request：一个通用差错代码，指示该请求不能被服务器理解。<br>404 Not Found：被请求的文档不在服务器上。<br>505 HTTP Version Not Supported：服务器不支持请求报文使用的HTTP协议版本。<br>接下来就是查看真实的HTTP响应报文，安装好Telnet工具后，详情见Eng.verP135，中译版P69-70，PPT第52页。</p>
<p>4.用户与服务器的交互：Cookies User-Server Interaction: Cookies<br>HTTP是无状态协议，但是Web站点为了识别用户,或者限制用户的访问，或者它希望把内容与用户身份联系起来，为此HTTP使用了Cookie。<br>cookie技术的4个组件：<br>①在HTTP响应报文中的一个cookie首部行；<br>②在HTTP请求报文中的一个cookie首部行；<br>③在用户端系统中保留有一个cookie文件，并由用户的浏览器进管理；<br>④位于Web站点的一个后端数据库。<br>详情和例子于PPT55页，Eng.verP136-138，中译版P70-71<br>Cookies可用于：标识一个用户，在无状态的HTTP之上建立一个会话，购物车，购物时的推荐。<br>Cookie的使用是有争议的，因为它们被认为是对用户隐私的一种侵害（想象某宝上买完物品后，各种APP浏览器上全是有关物品的相关推荐，更严重的是个人信息会被记录甚至会泄露，平时使用需要多加注意删除cookies文件）。</p>
<p>5.Web缓存WebCaching（Eng.verP138-144，中译版P72-75）<br>1）Web缓存器（Web cache）也叫作代理服务器（proxy server），它是能代表初始Web服务器来满足HTTP请求的网络实体。<br>可以配置用户的浏览器，使得用户的所有HTTP请求首先指向Web缓存器，一旦某浏览器被配置，每个对某对象的浏览器请求首先被定向到该Web缓存器。如果浏览器正在请求某对象，如果对象副本在缓存器中，则返回该对象；若不存在，缓存器则会从初始服务器请求该对象，并返回该对象给客户。（详见Eng.verP138-139，中译版P72）。<br>[9]客户通过Web缓存器请求对象（PPT60页）<br>2）Web缓存器既是服务器又是客户，接受浏览器的请求并响应时是服务器，向初始服务器发出请求并接收响应时是客户。<br>Web缓存器通常由ISP购买并安装。<br>部署Web缓存器的原因：<br>①Web缓存器可以大大减少对客户请求的响应时间。<br>②Web缓存器能够大大减少一个机构的接入链路到因特网的通信量。通过减少通信量，该机构就不必急于增加带宽，因此降低了费用。<br>③Web缓存器能从整体上大大减低因特网上的Web流量，从而改善了所有应用的性能。<br>书上的例子，详见Eng.verP140-142，中译版P73-74，PPT62-66页。</p>
<p>6.条件GET方法The Conditional GET(Eng.ver P142-144，中译版P74-75)<br>缓存器会带来问题，例如保存在服务器中的对象自该副本缓存在客户上以后可能已经被修改了（即过时了），为了不发送该过时对象，条件GET（Conditional GET）机制就有了意义。<br>cache: specify date of cached copy in HTTP request<br>If-modified-since:<date><br>server: response contains no object if cached copy is up-to-date:<br>HTTP/1.0304 Not Modified<br>注意最后的响应报文中，状态行中为304 Not Modified，它告诉缓存器可以使用该对象，能向请求的浏览器转发它缓存的该对象副本。</date></p>
<p>三、因特网中的电子邮件Electronic Mail in the Internet(Eng.ver P144-154，中译版P75-83)<br>因特网电子邮件系统由3个部分组成：用户代理（useragent）、邮件服务器（mail server）和简单邮件传输协议（SimpleMail Transfer Protocol, SMTP）<br>邮件服务器构成了电子邮件系统的核心。每个接收方在某个邮件服务器上有一个邮箱（mail box）。一个典型的电子邮件发送过程为：从发送方的用户代理开始，传输到发送方的邮件服务器，再传输到接收方的邮件服务器，然后在这里被分发到接收方的邮箱中。</p>
<p>[10]因特网电子邮件系统的总体描述</p>
<p>1.SMTP<br>SMTP是因特网电子邮件中主要的应用层协议，是因特网电子邮件的核心。SMTP有两个部分：运行在发送方邮件服务器的客户端和运行在接收方邮件服务器的服务器端。当一个邮件服务器向其他邮件服务器发送邮件时，他就表现为SMTP的客户；当邮件服务器从其他邮件服务器上接收邮件时，他就表现为一个SMTP的服务器。<br>SMTP的基本操作及例子，详见Eng.verP146-147，中译版P77。</p>
<p>[11]When sending an email, how the email works. (PPT 71页)<br>SMTP一般不使用中间邮件服务器发送邮件，即使这两个邮件服务器位于地球的两端也是如此。<br>若A向B发送邮件，如果B的邮件服务器没有开机，该报文会保留在A的邮件服务器上并等待进行新的尝试，这意味着邮件并不在中间的某个邮件服务器存留。<br>SMTP将一个报文从发送邮件服务器传送到接收邮件服务器的过程，见Eng.verP147-148，中译版P77-78.<br>2.与HTTP的对比<br>共同点：两个协议都用于从一台主机向另一台主机传送文件。当进行文件传送时，持续的HTTP和SMTP都使用持续连接。<br>不同点：①HTTP主要是一个拉协议（pull protocol），特别是TCP连接是由想接收文件的机器发起时。而SMTP基本上是一个推协议（push protocol），特别是TCP连接是由想要发送文件文件的机器发起的。（详意见Eng.verP149，中译版P78-79）。<br>②SMTP要求每个报文采用7-bitASCII码格式，HTTP数据不受这种限制。<br>③对于处理一个既包含文本，又包含图形的文档，HTTP把每个对象封装到自己的HTTP响应报文中；而SMTP则把所有报文对象放在一个报文之中。</p>
<p>3.邮件报文格式Mail Message Formats (Eng.ver P149-150，中译版P79)<br>典型的报文首部看起来如下：<br>From:<a href="mailto:alice@crepes.fr" target="_blank" rel="noopener">alice@crepes.fr</a><br>To:<a href="mailto:bob@hamburger.edu" target="_blank" rel="noopener">bob@hamburger.edu</a><br>Subject:Searching for the meaning of life</p>
<ol start="4">
<li>邮件访问协议Mail Access Protocols(Eng.ver P150-154，中译版P79-83)<br>现代的邮件访问使用了一种客户-服务器体系结构，及典型的用户通过在用户端系统上运行的客户程序来阅读电子邮件（然而这种方便的结构需要解决其带来的和引发的问题，这里讨论的邮件访问协议便提供了帮助，详情看书）。<br>需注意，SMTP是邮件服务器之间发送邮件报文的协议，并不是用户通过代理和邮件服务器之间通信的协议。而目前流行的一些邮件访问协议，包括第三版邮局协议（Post Office Protocol-Version3, POP3）、因特网邮件访问协议（InternetMail Access Protocol, IMPA）以及HTTP解决了这个问题。</li>
</ol>
<p>[12]电子邮件协议及实体通信（PPT74页）<br>上图总结了应用于因特网电子邮件的一些协议：SMTP用来将邮件从发送方的邮件服务器传输到接收方的邮件服务器；SMTP也用来将邮件从发送方的用户代理传送到发送方的邮件服务器。如POP3这样的邮件访问协议用来将邮件从接收方的邮件服务器传送到接收方的用户代理。<br>有关POP3、IMAP、基于Web的电子邮件需看书Eng.verP151-154，中译版P81-83.</p>

    </div>

    
    
    
        
      
        <div id="reward-container">
  <div>我这么可爱不给我投个币嘛~~ 有帮助的话可以打赏路路噢~~</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
        
      
      <div style="display: inline-block">
        <img src="/images/wechatpay.jpg" alt="Lucifinil 微信支付">
        <p>微信支付</p>
      </div>
        
      
      <div style="display: inline-block">
        <img src="/images/alipay.jpg" alt="Lucifinil 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2020/09/07/INT201-决策计算与语言/" rel="next" title="INT201 决策计算与语言(编译原理)">
                  <i class="fa fa-chevron-left"></i> INT201 决策计算与语言(编译原理)
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2020/09/07/CPT203-软件工程1/" rel="prev" title="CPT203 软件工程1">
                  CPT203 软件工程1 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#作业"><span class="nav-number">1.</span> <span class="nav-text">作业</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#黑马补课"><span class="nav-number">2.</span> <span class="nav-text">黑马补课</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。"><span class="nav-number">3.</span> <span class="nav-text">socket是全双工：在发的时候可以收，在收的时候可以发，只不过在目前程序里体现不出来，同一时间可以干很多事情的。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#csdn"><span class="nav-number">4.</span> <span class="nav-text">csdn</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#https-www-jb51-net-article-138172-htm"><span class="nav-number">5.</span> <span class="nav-text">https://www.jb51.net/article/138172.htm</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#https-blog-csdn-net-JIA227-article-details-72962786-utm-medium-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control-amp-depth-1-utm-source-distribute-pc-relevant-t0-none-task-blog-BlogCommendFromMachineLearnPai2-1-control"><span class="nav-number">6.</span> <span class="nav-text">https://blog.csdn.net/JIA227/article/details/72962786?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.control</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码问题"><span class="nav-number">7.</span> <span class="nav-text">代码问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#path-‘VMC-share’"><span class="nav-number">8.</span> <span class="nav-text"> path = ‘VMC_share’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一定要复制A和B的py命令！看好了再回车"><span class="nav-number">9.</span> <span class="nav-text">一定要复制A和B的py命令！看好了再回车</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#然后一会要把处理客户端的线程，存值用f-来改key值"><span class="nav-number">10.</span> <span class="nav-text">然后一会要把处理客户端的线程，存值用f{}来改key值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ports-20001-20002-20003"><span class="nav-number">11.</span> <span class="nav-text">ports = [20001,20002,20003]</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#测试时候改B-C"><span class="nav-number">11.1.</span> <span class="nav-text">测试时候改B,C</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运行测试"><span class="nav-number">12.</span> <span class="nav-text">运行测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个机器断开连接就不知道怎么办了"><span class="nav-number">13.</span> <span class="nav-text">一个机器断开连接就不知道怎么办了</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解决办法error"><span class="nav-number">13.1.</span> <span class="nav-text">解决办法error</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#两个全局变量给文件扫描线程-args-g-peers-g-file-dict-，他说不用global"><span class="nav-number"></span> <span class="nav-text">两个全局变量给文件扫描线程 args=(g_peers,g_file_dict)，他说不用global</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下面是file-scanner"><span class="nav-number"></span> <span class="nav-text">下面是file scanner</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下面是file-下载器"><span class="nav-number"></span> <span class="nav-text">下面是file 下载器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下面-tcp-listener"><span class="nav-number"></span> <span class="nav-text">下面 tcp listener</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#解析命令行用我自己的"><span class="nav-number"></span> <span class="nav-text">解析命令行用我自己的</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#压缩"><span class="nav-number"></span> <span class="nav-text">压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#材料"><span class="nav-number">0.1.</span> <span class="nav-text">材料</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#handbook"><span class="nav-number">1.</span> <span class="nav-text">handbook</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lab"><span class="nav-number">2.</span> <span class="nav-text">lab</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#syllabus课程安排"><span class="nav-number">3.</span> <span class="nav-text">syllabus课程安排</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lecture"><span class="nav-number">4.</span> <span class="nav-text">lecture</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#w1-networking基础理论"><span class="nav-number">4.1.</span> <span class="nav-text">w1 networking基础理论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#w4"><span class="nav-number">4.2.</span> <span class="nav-text">w4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#w5"><span class="nav-number">4.3.</span> <span class="nav-text">w5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#w6"><span class="nav-number">4.4.</span> <span class="nav-text">w6</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lab-1"><span class="nav-number">5.</span> <span class="nav-text">lab</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lab6-MODOULE-PIP"><span class="nav-number">5.1.</span> <span class="nav-text">lab6 MODOULE,PIP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#就可以用-A-方法名"><span class="nav-number">6.</span> <span class="nav-text">就可以用 A.方法名()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#multiprocessing-在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。"><span class="nav-number">7.</span> <span class="nav-text">multiprocessing 在处理高并行任务时进程间不需要相互通信，除了将初始化数据送到进程池的时候和收集结果的时候。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复制粘贴尝试lab6的代码"><span class="nav-number">8.</span> <span class="nav-text">复制粘贴尝试lab6的代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#老师喜欢process进程"><span class="nav-number">9.</span> <span class="nav-text">老师喜欢process进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#作业1"><span class="nav-number">10.</span> <span class="nav-text">作业1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注意"><span class="nav-number">10.1.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#王道考研"><span class="nav-number">11.</span> <span class="nav-text">王道考研</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一章"><span class="nav-number">11.1.</span> <span class="nav-text">第一章</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-按传输技术分"><span class="nav-number">12.</span> <span class="nav-text">5.按传输技术分</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标准化"><span class="nav-number">13.</span> <span class="nav-text">标准化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#往返时间"><span class="nav-number">14.</span> <span class="nav-text">往返时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#理论成功，市场失败"><span class="nav-number">15.</span> <span class="nav-text">理论成功，市场失败</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP-IP模型-和-五层参考模型"><span class="nav-number">16.</span> <span class="nav-text">TCP/IP模型 和 五层参考模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#王道考研-第二章-物理层"><span class="nav-number">16.1.</span> <span class="nav-text">王道考研 第二章 物理层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#王道考研-第六章-应用层"><span class="nav-number">16.2.</span> <span class="nav-text">王道考研 第六章 应用层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Application-architectures"><span class="nav-number">16.2.1.</span> <span class="nav-text">Application architectures</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#电子邮件系统SMTP-POP-IMAP"><span class="nav-number">16.2.2.</span> <span class="nav-text">电子邮件系统SMTP, POP, IMAP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#域名系统DNS-DNS服务器给域名返回ip地址"><span class="nav-number">16.2.3.</span> <span class="nav-text">域名系统DNS (DNS服务器给域名返回ip地址)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#传输协议是UDP还是TCP"><span class="nav-number">16.2.4.</span> <span class="nav-text">传输协议是UDP还是TCP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#认识http-https"><span class="nav-number">17.</span> <span class="nav-text">认识http,https</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#秦jiajun-应用层"><span class="nav-number">18.</span> <span class="nav-text">秦jiajun-应用层</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/touxiang1.jpg"
      alt="Lucifinil">
  <p class="site-author-name" itemprop="name">Lucifinil</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">67</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/Lucifinil-x" title="GitHub &rarr; https://github.com/Lucifinil-x" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://weibo.com/2890499315/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" title="weibo &rarr; https://weibo.com/2890499315/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>weibo</a>
      </span>
    
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://Lucifinil.com/" title="http://Lucifinil.com/" rel="noopener" target="_blank">Lucifinil</a>
        </li>
      
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucifinil</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>
<script src="/js/next-boot.js?v=7.4.0"></script>

    
  
    
  

  <script>
  (function() {
    window.addEventListener('DOMContentLoaded', () => {
      let script = document.createElement('script');
      script.src = '/lib/three/three.min.js';
      document.body.appendChild(script);
    });
    let styles = ['/lib/three/three-waves.min.js', '', '/lib/three/canvas_sphere.min.js'];
    window.addEventListener('load', () => {
      styles.forEach(item => {
        if (item !== '') {
          let script = document.createElement('script');
          script.src = item;
          document.body.appendChild(script);
        }
      });
    });
  })();
  </script>


  








  <script src="/js/local-search.js?v=7.4.0"></script>














  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'oDY3PgVcs4KquzU5ExfpRIvL-gzGzoHsz',
    appKey: 'TfeAqOOA3dvfY8DgjnBCdFUI',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script>

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>